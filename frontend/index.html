<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="BedavaFinans - Kripto piyasa sinyal paneli. Top 50 coin, teknik analiz sinyalleri, Fear & Greed, balina takibi ve daha fazlasi.">
    <meta name="keywords" content="kripto, bitcoin, sinyal, teknik analiz, fear greed, whale tracker, derivatives, BedavaFinans">
    <meta name="author" content="BedavaFinans">
    <meta property="og:title" content="BedavaFinans - Kripto Sinyal Paneli">
    <meta property="og:description" content="Top 50 coin icin 4 katmanli bilesik sinyal sistemi, gercek zamanli piyasa verileri ve teknik analiz.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://bedavafinans.info">
    <meta property="og:locale" content="tr_TR">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BedavaFinans - Kripto Sinyal Paneli">
    <meta name="twitter:description" content="Top 50 coin icin 4 katmanli bilesik sinyal sistemi, gercek zamanli piyasa verileri.">
    <link rel="canonical" href="https://bedavafinans.info">
    <link rel="icon" type="image/svg+xml" href="/static/icons/icon-192.svg">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>BedavaFinans - Kripto Sinyal Paneli</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://unpkg.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"></noscript>
    <link rel="stylesheet" href="/static/css/custom.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
                }
            }
        }
    </script>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js" defer></script>
</head>
<body class="min-h-screen">

    <!-- ═══ HEADER ═══ -->
    <header style="background:var(--bg-secondary);border-bottom:1px solid var(--border)" class="px-4 py-3">
        <div class="max-w-[1440px] mx-auto flex items-center justify-between" style="position:relative">
            <div class="flex items-center gap-3">
                <h1 class="text-lg font-bold" style="background:linear-gradient(135deg,#3b82f6,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent">
                    BedavaFinans
                </h1>
                <div id="market-score-ring" class="ml-2" style="min-width:64px;min-height:64px"></div>
            </div>
            <div class="header-controls" id="header-controls">
                <span id="loading-indicator" style="display:none;color:var(--accent-blue)">
                    <svg class="animate-spin inline w-4 h-4" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="32" stroke-dashoffset="8"/></svg>
                </span>
                <span style="color:var(--text-secondary);font-size:14px" data-i18n="last-update">Son:</span>
                <span id="last-updated" class="font-medium" style="font-size:14px">--:--</span>
                <div id="countdown-bar" style="width:60px;height:4px;border-radius:2px;background:var(--border);overflow:hidden;display:inline-block;vertical-align:middle">
                    <div id="countdown-fill" style="width:100%;height:100%;background:var(--accent-blue);border-radius:2px;transition:width 1s linear"></div>
                </div>
                <span id="countdown-text" style="font-size:11px;color:var(--text-secondary);min-width:28px">2:00</span>
                <button id="refresh-toggle" class="tab-btn active" style="color:#10b981" data-i18n="auto">Oto</button>
                <button id="theme-toggle" onclick="toggleTheme()" class="theme-toggle" data-i18n-title="toggle-theme" title="Tema değiştir">
                    <svg id="theme-icon-moon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                    <svg id="theme-icon-sun" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                </button>
                <button id="lang-toggle" onclick="toggleLang()" class="tab-btn" style="color:var(--accent-purple);font-weight:700;min-width:32px" title="Switch to English">EN</button>
            </div>
            <button class="mobile-menu-btn" id="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Menu">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
            </button>
        </div>
    </header>

    <main class="max-w-[1440px] mx-auto px-4 py-4 flex flex-col gap-4">

        <!-- ═══ ROW 1: Market Overview Cards ═══ -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 overview-grid" style="min-height:120px">
            <div class="card">
                <div style="color:var(--text-secondary);font-size:11px;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px" data-i18n="total-market-cap">Toplam Piyasa Değeri</div>
                <div id="total-mcap" class="text-xl font-bold">—</div>
                <div id="mcap-change" class="text-sm mt-1">—</div>
            </div>
            <div class="card">
                <div style="color:var(--text-secondary);font-size:11px;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px" data-i18n="24h-volume">24s Hacim</div>
                <div id="total-volume" class="text-xl font-bold">—</div>
            </div>
            <div class="card">
                <div style="color:var(--text-secondary);font-size:11px;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px" data-i18n="btc-dominance-label">BTC Hakimiyeti</div>
                <div id="btc-dominance" class="text-xl font-bold">—</div>
            </div>
            <div class="card" style="min-height:110px">
                <div style="color:var(--text-secondary);font-size:11px;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px" data-i18n="fear-greed-label">Korku & Açgözlülük</div>
                <div id="fear-greed-gauge"></div>
                <div id="fear-greed-history" class="mt-2"></div>
            </div>
        </div>

        <!-- ═══ ROW 2: Whale Ticker ═══ -->
        <div id="whale-ticker" style="min-height:36px"></div>

        <!-- ═══ ROW 3: Signals + Derivatives ═══ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4" style="min-height:420px">
            <div class="lg:col-span-2 card" style="padding:0;overflow:hidden">
                <div class="px-4 py-3 flex items-center justify-between" style="border-bottom:1px solid var(--border)">
                    <h2 class="font-semibold text-sm" data-i18n="trading-signals">İşlem Sinyalleri (Top 15)</h2>
                    <span style="font-size:11px;color:var(--text-secondary)" data-i18n="4-layer">4 Katmanlı Bileşik</span>
                </div>
                <div style="overflow-x:auto;max-height:420px;overflow-y:auto">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-i18n="th-coin">Coin</th>
                                <th data-i18n="th-price">Fiyat</th>
                                <th data-i18n="th-24h">24s</th>
                                <th data-i18n="th-signal">Sinyal</th>
                                <th data-i18n="th-score">Skor</th>
                                <th data-i18n="th-rsi">RSI</th>
                                <th data-i18n="th-layers">Katmanlar</th>
                            </tr>
                        </thead>
                        <tbody id="signals-tbody">
                            <tr><td colspan="7" style="text-align:center;padding:24px;color:var(--text-secondary)" data-i18n="loading-signals">Sinyaller yükleniyor...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card" style="padding:0;overflow:hidden">
                <div class="px-4 py-3" style="border-bottom:1px solid var(--border)">
                    <h2 class="font-semibold text-sm" data-i18n="derivatives">Türev Piyasalar</h2>
                    <div class="flex gap-4 mt-1" style="font-size:10px;color:var(--text-secondary)">
                        <span data-i18n="th-symbol">Sembol</span><span data-i18n="th-funding">Fonlama</span><span data-i18n="th-ls">U/K</span><span data-i18n="th-oi">AK</span>
                    </div>
                </div>
                <div id="derivatives-list" class="px-4 py-2" style="max-height:380px;overflow-y:auto">
                    <div style="color:var(--text-secondary);font-size:12px" data-i18n="loading">Yükleniyor...</div>
                </div>
            </div>
        </div>

        <!-- ═══ ROW 4: Chart + Side Panels ═══ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
            <div class="lg:col-span-2 card" style="padding:0;overflow:hidden">
                <div class="px-4 py-3 flex items-center justify-between" style="border-bottom:1px solid var(--border)">
                    <h2 id="chart-title" class="font-semibold text-sm">Bitcoin (BTC)</h2>
                    <div class="flex gap-2" style="font-size:10px">
                        <span style="color:#f97316">━ <span data-i18n="chart-legend-ema9">EMA 9</span></span>
                        <span style="color:#8b5cf6">━ <span data-i18n="chart-legend-ema21">EMA 21</span></span>
                        <span style="color:rgba(59,130,246,0.5)">┈ <span data-i18n="chart-legend-bb">BB</span></span>
                    </div>
                </div>
                <div id="chart-container" style="height:400px"></div>
            </div>

            <div class="flex flex-col gap-4 side-panels">
                <div class="card" style="padding:0;overflow:hidden">
                    <div class="px-4 py-3 flex items-center gap-2" style="border-bottom:1px solid var(--border)">
                        <h2 class="font-semibold text-sm" data-i18n="top-movers">En Çok Değişenler</h2>
                        <div class="flex gap-1 ml-auto">
                            <button class="tab-btn movers-tab active" data-tab="gainers" onclick="switchMoversTab('gainers')" data-i18n="gainers">Yükselenler</button>
                            <button class="tab-btn movers-tab" data-tab="losers" onclick="switchMoversTab('losers')" data-i18n="losers">Düşenler</button>
                        </div>
                    </div>
                    <div id="movers-list" class="px-4 py-2" style="max-height:180px;overflow-y:auto">
                        <div style="color:var(--text-secondary);font-size:12px" data-i18n="loading">Yükleniyor...</div>
                    </div>
                </div>

                <div class="card" style="padding:0;overflow:hidden">
                    <div class="px-4 py-3" style="border-bottom:1px solid var(--border)">
                        <h2 class="font-semibold text-sm" data-i18n="volume-anomalies">Hacim Anomalileri</h2>
                    </div>
                    <div id="anomalies-list" class="px-4 py-2" style="max-height:140px;overflow-y:auto">
                        <div style="color:var(--text-secondary);font-size:12px" data-i18n="loading">Yükleniyor...</div>
                    </div>
                </div>

                <div class="card" style="padding:0;overflow:hidden">
                    <div class="px-4 py-3" style="border-bottom:1px solid var(--border)">
                        <h2 class="font-semibold text-sm" data-i18n="news-sentiment">Haber Duygusu</h2>
                    </div>
                    <div id="news-sentiment" class="px-4 py-2" style="max-height:240px;overflow-y:auto">
                        <div style="color:var(--text-secondary);font-size:12px" data-i18n="loading">Yükleniyor...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ═══ ROW 5: Social Buzz ═══ -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            <div class="card" style="padding:0;overflow:hidden">
                <div class="px-4 py-3 flex items-center justify-between" style="border-bottom:1px solid var(--border)">
                    <h2 class="font-semibold text-sm" data-i18n="social-buzz">Piyasa Buzz</h2>
                    <span style="font-size:11px;color:var(--text-secondary)" data-i18n="social-buzz-sub">Hacim & Momentum</span>
                </div>
                <div id="social-buzz-list" class="px-4 py-2" style="max-height:320px;overflow-y:auto">
                    <div style="color:var(--text-secondary);font-size:12px" data-i18n="loading">Yükleniyor...</div>
                </div>
            </div>

            <div class="card" style="padding:0;overflow:hidden">
                <div class="px-4 py-3 flex items-center justify-between" style="border-bottom:1px solid var(--border)">
                    <h2 class="font-semibold text-sm" data-i18n="trending-social">Trending</h2>
                    <span style="font-size:11px;color:var(--text-secondary)" data-i18n="trending-social-sub">CoinGecko</span>
                </div>
                <div id="trending-social-list" class="px-4 py-2" style="max-height:320px;overflow-y:auto">
                    <div style="color:var(--text-secondary);font-size:12px" data-i18n="no-lunarcrush">Trending verisi yükleniyor...</div>
                </div>
            </div>
        </div>

        <!-- ═══ ROW 6: Dream Machine ═══ -->
        <div class="card dream-machine-card" style="padding:0;overflow:hidden">
            <div class="px-4 py-3 flex items-center justify-between" style="border-bottom:1px solid var(--border)">
                <div class="flex items-center gap-2">
                    <span style="font-size:20px">&#x1F4AD;</span>
                    <h2 class="font-semibold text-sm" data-i18n="dream-machine">Hayal Kurma Makinesi</h2>
                </div>
                <span style="font-size:11px;color:var(--text-secondary)" data-i18n="dream-machine-sub">Yatırımını hayal et</span>
            </div>
            <div class="px-4 py-4">
                <!-- Input Row -->
                <div class="dream-inputs">
                    <div class="dream-input-group">
                        <label for="dream-coin" style="font-size:11px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px;display:block" data-i18n="dream-select-coin">Coin Seç</label>
                        <select id="dream-coin" class="dream-select" onchange="calculateDream()" aria-label="Coin Seç">
                            <option value="">—</option>
                        </select>
                    </div>
                    <div class="dream-input-group">
                        <label style="font-size:11px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px;display:block">
                            <span data-i18n="dream-invest-amount">Yatırım Tutarı ($)</span>
                            <button id="dream-mode-toggle" onclick="toggleDreamInputMode()" class="dream-mode-btn" title="$ / Coin">$</button>
                        </label>
                        <input type="number" id="dream-amount" class="dream-input" placeholder="1000" min="0.000001" step="any" oninput="calculateDream()">
                    </div>
                    <div class="dream-input-group">
                        <label style="font-size:11px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px;display:block" data-i18n="dream-target">Hedef Yükseliş (%)</label>
                        <input type="number" id="dream-target" class="dream-input" placeholder="100" min="1" oninput="calculateDream()">
                    </div>
                </div>

                <!-- Quick Percentage Buttons -->
                <div class="dream-quick-pcts">
                    <button class="dream-pct-btn" onclick="setDreamTarget(25)">+25%</button>
                    <button class="dream-pct-btn" onclick="setDreamTarget(50)">+50%</button>
                    <button class="dream-pct-btn" onclick="setDreamTarget(100)">+100%</button>
                    <button class="dream-pct-btn" onclick="setDreamTarget(250)">+250%</button>
                    <button class="dream-pct-btn" onclick="setDreamTarget(500)">+500%</button>
                    <button class="dream-pct-btn" onclick="setDreamTarget(1000)">+1000%</button>
                    <button class="dream-pct-btn dream-ath-btn" id="dream-ath-btn" onclick="setDreamATH()" data-i18n="dream-to-ath">ATH'ye</button>
                </div>

                <!-- Results -->
                <div id="dream-results" style="display:none">
                    <!-- Result Header -->
                    <div id="dream-header" class="dream-result-header"></div>
                    <!-- Summary -->
                    <div id="dream-summary" class="dream-summary"></div>
                    <!-- Items Grid -->
                    <div id="dream-items" class="dream-items-grid"></div>
                </div>
            </div>
        </div>

        <!-- ═══ ROW 7: Full Coin Table ═══ -->
        <div class="card" style="padding:0;overflow:hidden;min-height:200px">
            <div class="px-4 py-3 flex items-center justify-between flex-wrap gap-2" style="border-bottom:1px solid var(--border)">
                <div class="flex items-center gap-2">
                    <h2 class="font-semibold text-sm" data-i18n="all-coins">Tüm Coinler (Top 50)</h2>
                    <button id="watchlist-filter" onclick="toggleWatchlistFilter()" class="tab-btn" style="color:var(--text-secondary);font-size:11px;padding:4px 8px" data-i18n-title="watchlist-filter-title" title="Favorileri filtrele">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline;vertical-align:middle"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                        <span data-i18n="watchlist">Favoriler</span>
                    </button>
                    <button onclick="exportCoins('csv')" class="tab-btn" style="color:var(--text-secondary);font-size:11px;padding:4px 8px" title="Export CSV">CSV</button>
                    <button onclick="exportCoins('json')" class="tab-btn" style="color:var(--text-secondary);font-size:11px;padding:4px 8px" title="Export JSON">JSON</button>
                </div>
                <div class="search-wrapper" style="position:relative;width:220px">
                    <svg style="position:absolute;left:10px;top:50%;transform:translateY(-50%);color:var(--text-secondary)" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.3-4.3"/></svg>
                    <input type="text" id="coin-search" class="search-input" data-i18n="search-placeholder" placeholder="Coin ara...">
                </div>
            </div>
            <div style="overflow-x:auto;max-height:500px;overflow-y:auto">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th onclick="sortTable('market_cap_rank')" style="width:40px" data-i18n="th-rank">#</th>
                            <th onclick="sortTable('name')" data-i18n="th-coin">Coin</th>
                            <th onclick="sortTable('current_price')" data-i18n="th-price">Fiyat</th>
                            <th onclick="sortTable('price_change_percentage_1h_in_currency')" data-i18n="th-1h">1s</th>
                            <th onclick="sortTable('price_change_percentage_24h_in_currency')" data-i18n="th-24h">24s</th>
                            <th onclick="sortTable('price_change_percentage_7d_in_currency')" data-i18n="th-7d">7g</th>
                            <th style="width:80px" data-i18n="th-7d-chart">7g Grafik</th>
                            <th onclick="sortTable('total_volume')" data-i18n="th-volume">Hacim</th>
                            <th onclick="sortTable('market_cap')" data-i18n="th-market-cap">Piyasa Değeri</th>
                        </tr>
                    </thead>
                    <tbody id="coins-tbody">
                        <tr><td colspan="9" style="text-align:center;padding:24px;color:var(--text-secondary)" data-i18n="loading-coins">Coinler yükleniyor...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- ═══ FOOTER ═══ -->
    <footer class="text-center py-4" style="color:var(--text-secondary);font-size:11px;border-top:1px solid var(--border)">
        <span data-i18n="footer-text">BedavaFinans Sinyal Paneli</span> &middot; <span data-i18n="footer-data">Veri:</span> CoinGecko, Binance, Alternative.me, CryptoCompare, LunarCrush &middot; <span data-i18n="footer-refresh">Otomatik yenileme: 2 dk</span>
    </footer>

    <!-- Coin Detail Modal -->
    <div id="coin-modal" class="modal-overlay" style="display:none" onclick="if(event.target===this)closeModal()">
        <div class="modal-content card">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <div id="modal-body">
                <div style="text-align:center;padding:24px;color:var(--text-secondary)" data-i18n="loading">Yükleniyor...</div>
            </div>
        </div>
    </div>

    <!-- Toast container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Scripts (order matters: i18n before app; defer preserves order) -->
    <script src="/static/js/utils.js" defer></script>
    <script src="/static/js/i18n.js" defer></script>
    <script src="/static/js/api.js" defer></script>
    <script src="/static/js/charts.js" defer></script>
    <script src="/static/js/signals.js" defer></script>
    <script src="/static/js/widgets.js" defer></script>
    <script src="/static/js/app.js" defer></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').catch(() => {});
            });
        }
    </script>

</body>
</html>
