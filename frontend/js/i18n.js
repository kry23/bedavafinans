/* BedavaFinans Internationalization - TR (default) / EN */

const TRANSLATIONS = {
    tr: {
        // Header
        'last-update': 'Son:',
        'auto': 'Oto',
        'paused': 'Durduruldu',

        // Market Overview Cards
        'total-market-cap': 'Toplam Piyasa Değeri',
        '24h-volume': '24s Hacim',
        'btc-dominance-label': 'BTC Hakimiyeti',
        'fear-greed-label': 'Korku & Açgözlülük',

        // Signal Table
        'trading-signals': 'İşlem Sinyalleri (Top 15)',
        '4-layer': '4 Katmanlı Bileşik',
        'th-coin': 'Coin',
        'th-price': 'Fiyat',
        'th-24h': '24s',
        'th-signal': 'Sinyal',
        'th-score': 'Skor',
        'th-rsi': 'RSI',
        'th-layers': 'Katmanlar',
        'loading-signals': 'Sinyaller yükleniyor...',

        // Derivatives
        'derivatives': 'Türev Piyasalar',
        'th-symbol': 'Sembol',
        'th-funding': 'Fonlama',
        'th-ls': 'U/K',
        'th-oi': 'AK',

        // Chart
        'chart-legend-ema9': 'EMA 9',
        'chart-legend-ema21': 'EMA 21',
        'chart-legend-bb': 'BB',

        // Top Movers
        'top-movers': 'En Çok Değişenler',
        'gainers': 'Yükselenler',
        'losers': 'Düşenler',

        // Volume Anomalies
        'volume-anomalies': 'Hacim Anomalileri',
        'no-anomalies': 'Anomali tespit edilmedi',

        // News Sentiment
        'news-sentiment': 'Haber Duygusu',

        // Coin Table
        'all-coins': 'Tüm Coinler (Top 100)',
        'search-placeholder': 'Coin ara...',
        'th-rank': '#',
        'th-1h': '1s',
        'th-7d': '7g',
        'th-7d-chart': '7g Grafik',
        'th-volume': 'Hacim',
        'th-market-cap': 'Piyasa Değeri',
        'loading-coins': 'Coinler yükleniyor...',

        // Footer
        'footer-text': 'BedavaFinans Sinyal Paneli',
        'footer-data': 'Veri:',
        'footer-refresh': 'Otomatik yenileme: 2 dk',
        'share': 'Paylaş:',

        // Cookie Banner
        'cookie-text': 'Bu site deneyiminizi iyileştirmek için çerez kullanır (Google Analytics). Devam ederek çerez kullanımını kabul etmiş olursunuz.',
        'cookie-privacy': 'Gizlilik Politikası',
        'cookie-accept': 'Kabul Et',
        'cookie-reject': 'Reddet',

        // Signals
        'strong-buy': 'GÜÇLÜ AL',
        'buy': 'AL',
        'neutral': 'NÖTR',
        'sell': 'SAT',
        'strong-sell': 'GÜÇLÜ SAT',
        'no-data': 'VERİ YOK',

        // Confidence
        'high': 'Yüksek',
        'medium': 'Orta',
        'low': 'Düşük',

        // Sentiment labels
        'bullish': 'Yükseliş',
        'slightly-bullish': 'Hafif Yükseliş',
        'neutral-sent': 'Nötr',
        'slightly-bearish': 'Hafif Düşüş',
        'bearish': 'Düşüş',

        // Fear & Greed classifications
        'extreme-fear': 'Aşırı Korku',
        'fear': 'Korku',
        'neutral-fg': 'Nötr',
        'greed': 'Açgözlülük',
        'extreme-greed': 'Aşırı Açgözlülük',

        // Market Score
        'very-bullish': 'Çok Yükseliş',
        'very-bearish': 'Çok Düşüş',

        // Watchlist
        'watchlist': 'Favoriler',
        'watchlist-filter-title': 'Favorileri filtrele',

        // Whale
        'whale-loading': 'Balina verisi yükleniyor...',
        'ago': 'önce',

        // Theme
        'toggle-theme': 'Tema değiştir',

        // Toast / Alerts
        'data-refreshed': 'Veriler guncellendi',
        'refresh-error': 'Yenileme hatasi',
        'alert-prompt': 'Hedef fiyat girin ($):',

        // Social Buzz
        'social-buzz': 'Piyasa Buzz',
        'social-buzz-sub': 'Hacim & Momentum',
        'trending-social': 'Trending',
        'trending-social-sub': 'CoinGecko',
        'no-lunarcrush': 'Trending verisi yükleniyor...',
        'reddit-active': 'Reddit Aktif',
        'reddit-posts': 'Post/saat',
        'twitter-followers': 'Twitter Takipci',
        'github-stars': 'GitHub',
        'buzz-score': 'Buzz Skoru',
        'interactions': 'Etkilesim',
        'posts': 'Gonderi',
        'contributors': 'Katilimci',
        'sentiment-positive': 'Pozitif',
        'sentiment-negative': 'Negatif',
        'community': 'Topluluk',

        // Dream Machine
        'dream-machine': 'Hayal Kurma Makinesi',
        'dream-machine-sub': 'Yatırımını hayal et',
        'dream-select-coin': 'Coin Seç',
        'dream-invest-amount': 'Yatırım Tutarı ($)',
        'dream-invest-coins': 'Alacağın Miktar (Coin)',
        'dream-target': 'Hedef Yükseliş (%)',
        'dream-current-price': 'Mevcut Fiyat',
        'dream-target-price': 'Hedef Fiyat',
        'dream-investment': 'Yatırım',
        'dream-profit': 'Kâr',
        'dream-total': 'Eline Geçecek',
        'dream-coins-bought': 'Alınan Coin',
        'dream-you-can-buy': 'Bu kârla alabileceklerin:',
        'dream-x-count': 'x',
        'dream-fill-fields': 'Coin seçin, yatırım tutarı ve hedef yükseliş girin',
        'dream-to-ath': "ATH'ye",
        'dream-headline': '{coin} yükselirse...',
        'dream-subline': '{amount} yatırımla {coins} adet {symbol} alırsın',

        // Dream items
        'dream-kebab': 'Kebap',
        'dream-netflix': 'Netflix (1 Ay)',
        'dream-pizza': 'Pizza Siparişi',
        'dream-spotify': 'Spotify (1 Yıl)',
        'dream-sneakers': 'Nike Air Max',
        'dream-airpods': 'AirPods Pro',
        'dream-ps5': 'PlayStation 5',
        'dream-iphone': 'iPhone 16 Pro',
        'dream-macbook': 'MacBook Pro',
        'dream-rolex': 'Rolex Saat',
        'dream-tesla': 'Tesla Model 3',
        'dream-porsche': 'Porsche 911',
        'dream-apartment': 'Daire (İstanbul)',
        'dream-lambo': 'Lamborghini',
        'dream-villa': 'Villa (Bodrum)',
        'dream-yacht': 'Yat',
        'dream-jet': 'Özel Jet',

        // General
        'loading': 'Yükleniyor...',
        'pos': 'poz',
        'neg': 'neg',
    },

    en: {
        'last-update': 'Last:',
        'auto': 'Auto',
        'paused': 'Paused',

        'total-market-cap': 'Total Market Cap',
        '24h-volume': '24h Volume',
        'btc-dominance-label': 'BTC Dominance',
        'fear-greed-label': 'Fear & Greed',

        'trading-signals': 'Trading Signals (Top 15)',
        '4-layer': '4-Layer Composite',
        'th-coin': 'Coin',
        'th-price': 'Price',
        'th-24h': '24h',
        'th-signal': 'Signal',
        'th-score': 'Score',
        'th-rsi': 'RSI',
        'th-layers': 'Layers',
        'loading-signals': 'Loading signals...',

        'derivatives': 'Derivatives',
        'th-symbol': 'Symbol',
        'th-funding': 'Funding',
        'th-ls': 'L/S',
        'th-oi': 'OI',

        'chart-legend-ema9': 'EMA 9',
        'chart-legend-ema21': 'EMA 21',
        'chart-legend-bb': 'BB',

        'top-movers': 'Top Movers',
        'gainers': 'Gainers',
        'losers': 'Losers',

        'volume-anomalies': 'Volume Anomalies',
        'no-anomalies': 'No anomalies detected',

        'news-sentiment': 'News Sentiment',

        'all-coins': 'All Coins (Top 100)',
        'search-placeholder': 'Search coin...',
        'th-rank': '#',
        'th-1h': '1h',
        'th-7d': '7d',
        'th-7d-chart': '7d Chart',
        'th-volume': 'Volume',
        'th-market-cap': 'Market Cap',
        'loading-coins': 'Loading coins...',

        'footer-text': 'BedavaFinans Signal Dashboard',
        'footer-data': 'Data:',
        'footer-refresh': 'Auto-refresh: 2 min',
        'share': 'Share:',

        // Cookie Banner
        'cookie-text': 'This site uses cookies (Google Analytics) to improve your experience. By continuing, you accept the use of cookies.',
        'cookie-privacy': 'Privacy Policy',
        'cookie-accept': 'Accept',
        'cookie-reject': 'Reject',

        'strong-buy': 'STRONG BUY',
        'buy': 'BUY',
        'neutral': 'NEUTRAL',
        'sell': 'SELL',
        'strong-sell': 'STRONG SELL',
        'no-data': 'NO DATA',

        'high': 'High',
        'medium': 'Medium',
        'low': 'Low',

        'bullish': 'Bullish',
        'slightly-bullish': 'Slightly Bullish',
        'neutral-sent': 'Neutral',
        'slightly-bearish': 'Slightly Bearish',
        'bearish': 'Bearish',

        'extreme-fear': 'Extreme Fear',
        'fear': 'Fear',
        'neutral-fg': 'Neutral',
        'greed': 'Greed',
        'extreme-greed': 'Extreme Greed',

        'very-bullish': 'Very Bullish',
        'very-bearish': 'Very Bearish',

        'whale-loading': 'Whale data loading...',
        'ago': 'ago',

        'watchlist': 'Watchlist',
        'watchlist-filter-title': 'Filter watchlist',

        'toggle-theme': 'Toggle theme',

        'data-refreshed': 'Data refreshed',
        'refresh-error': 'Refresh error',
        'alert-prompt': 'Enter target price ($):',

        // Social Buzz
        'social-buzz': 'Market Buzz',
        'social-buzz-sub': 'Volume & Momentum',
        'trending-social': 'Trending',
        'trending-social-sub': 'CoinGecko',
        'no-lunarcrush': 'Loading trending data...',
        'reddit-active': 'Reddit Active',
        'reddit-posts': 'Posts/hr',
        'twitter-followers': 'Twitter Followers',
        'github-stars': 'GitHub',
        'buzz-score': 'Buzz Score',
        'interactions': 'Interactions',
        'posts': 'Posts',
        'contributors': 'Contributors',
        'sentiment-positive': 'Positive',
        'sentiment-negative': 'Negative',
        'community': 'Community',

        // Dream Machine
        'dream-machine': 'Dream Machine',
        'dream-machine-sub': 'Dream your investment',
        'dream-select-coin': 'Select Coin',
        'dream-invest-amount': 'Investment Amount ($)',
        'dream-target': 'Target Increase (%)',
        'dream-current-price': 'Current Price',
        'dream-target-price': 'Target Price',
        'dream-investment': 'Investment',
        'dream-profit': 'Profit',
        'dream-total': 'Total Return',
        'dream-coins-bought': 'Coins Bought',
        'dream-you-can-buy': 'With this profit you can buy:',
        'dream-x-count': 'x',
        'dream-fill-fields': 'Select a coin, enter investment amount and target increase',

        'dream-invest-coins': 'Amount to Buy (Coins)',
        'dream-to-ath': "To ATH",
        'dream-headline': 'If {coin} rises...',
        'dream-subline': 'With {amount} you buy {coins} {symbol}',

        // Dream items
        'dream-kebab': 'Kebab',
        'dream-netflix': 'Netflix (1 Month)',
        'dream-pizza': 'Pizza Order',
        'dream-spotify': 'Spotify (1 Year)',
        'dream-sneakers': 'Nike Air Max',
        'dream-airpods': 'AirPods Pro',
        'dream-ps5': 'PlayStation 5',
        'dream-iphone': 'iPhone 16 Pro',
        'dream-macbook': 'MacBook Pro',
        'dream-rolex': 'Rolex Watch',
        'dream-tesla': 'Tesla Model 3',
        'dream-porsche': 'Porsche 911',
        'dream-apartment': 'Apartment (Istanbul)',
        'dream-lambo': 'Lamborghini',
        'dream-villa': 'Villa (Bodrum)',
        'dream-yacht': 'Yacht',
        'dream-jet': 'Private Jet',

        'loading': 'Loading...',
        'pos': 'pos',
        'neg': 'neg',
    }
};

let currentLang = localStorage.getItem('bedavafinans-lang') || 'tr';

function t(key) {
    return TRANSLATIONS[currentLang]?.[key] || TRANSLATIONS['en']?.[key] || key;
}

function setLang(lang) {
    currentLang = lang;
    localStorage.setItem('bedavafinans-lang', lang);
    applyTranslations();
    updateLangButton();
}

function toggleLang() {
    setLang(currentLang === 'tr' ? 'en' : 'tr');
    // Re-render dynamic content
    if (typeof loadAll === 'function') {
        renderDynamicContent();
    }
}

function applyTranslations() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const text = t(key);
        if (el.tagName === 'INPUT') {
            el.placeholder = text;
        } else {
            el.textContent = text;
        }
    });
    document.querySelectorAll('[data-i18n-title]').forEach(el => {
        el.title = t(el.getAttribute('data-i18n-title'));
    });
}

function updateLangButton() {
    const btn = document.getElementById('lang-toggle');
    if (btn) {
        btn.textContent = currentLang === 'tr' ? 'EN' : 'TR';
        btn.title = currentLang === 'tr' ? 'Switch to English' : 'Türkçeye geç';
    }
}

function translateSignal(signal) {
    const map = {
        'STRONG BUY': t('strong-buy'),
        'BUY': t('buy'),
        'NEUTRAL': t('neutral'),
        'SELL': t('sell'),
        'STRONG SELL': t('strong-sell'),
        'NO DATA': t('no-data'),
    };
    return map[signal] || signal;
}

function translateConfidence(confidence) {
    const map = {
        'High': t('high'),
        'Medium': t('medium'),
        'Low': t('low'),
    };
    return map[confidence] || confidence;
}

function translateFearGreed(classification) {
    const map = {
        'Extreme Fear': t('extreme-fear'),
        'Fear': t('fear'),
        'Neutral': t('neutral-fg'),
        'Greed': t('greed'),
        'Extreme Greed': t('extreme-greed'),
    };
    return map[classification] || classification;
}

function translateSentiment(label) {
    const map = {
        'Bullish': t('bullish'),
        'Slightly Bullish': t('slightly-bullish'),
        'Neutral': t('neutral-sent'),
        'Slightly Bearish': t('slightly-bearish'),
        'Bearish': t('bearish'),
    };
    return map[label] || label;
}

function translateMarketScore(label) {
    const map = {
        'Very Bullish': t('very-bullish'),
        'Bullish': t('bullish'),
        'Neutral': t('neutral-sent'),
        'Bearish': t('bearish'),
        'Very Bearish': t('very-bearish'),
    };
    return map[label] || label;
}
